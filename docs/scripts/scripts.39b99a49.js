!function(){"use strict";angular.module("facetApp",["ui.router","seco.facetedSearch","ngTable","angular.filter","ngAnimate","ui.bootstrap","infinite-scroll"]).constant("_",_).constant("RESULTS_PER_PAGE",25).constant("PAGES_PER_QUERY",1).value("SPARQL_ENDPOINT_URL","https://ldf.fi/norssit/sparql").config(["$urlMatcherFactoryProvider",function(a){a.strictMode(!1)}]).config(["$urlRouterProvider",function(a){a.otherwise("/ruudukko")}]).config(["$stateProvider",function(a){a.state("detail",{url:"/tiedot/:personId",templateUrl:"views/norssit.detail.html",controller:"DetailController",controllerAs:"vm"}).state("table",{url:"/lista",templateUrl:"views/norssit.table.html",controller:"TableController",controllerAs:"vm"}).state("cards",{url:"/ruudukko",templateUrl:"views/norssit.cards.html",controller:"CardsController",controllerAs:"vm"}).state("visualizations",{"abstract":!0}).state("visualizations.visu",{url:"/visualisointi",templateUrl:"views/norssit.visu.html",controller:"VisuController",controllerAs:"vm"}).state("visualizations.visu2",{url:"/visualisointi2",templateUrl:"views/norssit.visu2.html",controller:"VisuController2",controllerAs:"vm"})}])}(),function(){"use strict";angular.module("facetApp").filter("castArray",["_",function(a){return function(b){return a.castArray(b)}}])}(),function(){"use strict";function a(a,b){function c(){this.objectClass=Object}function d(b){return b.forEach(function(b){b.hasAchievements="true"===b.hasAchievements?!0:!1,b.hasImage=!!b.images,b.images=b.images?a.castArray(b.images):["images/person_placeholder.cd371769.svg"]}),b}c.prototype.postProcess=d;var e=Object.getPrototypeOf(b);return c.prototype=angular.extend({},e,c.prototype),new c}angular.module("facetApp").factory("personMapperService",a),a.$inject=["_","objectMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){return w.getResults(a,n())}function i(b){var c=q+r,d="VALUES ?id { <"+b+"> } ";return x.getObjects(c.replace("<RESULT_SET>",d)).then(function(b){return b.length?b[0]:a.reject("Not found")})}function j(a){if(!a.hasAchievements||a.achievements)return a;var b=s.replace("<ID>","<"+a.id+">");return x.getObjects(b).then(function(b){return a.achievements=b,a})}function k(){var b=angular.copy(p);return a.when(b)}function l(){return u}function m(a){var c=b.search().sortBy||"?ordinal";c===a&&b.search("desc",b.search().desc?null:!0),b.search("sortBy",a)}function n(){var a=b.search().sortBy;c.isString(a)||(a="?ordinal");var d;return d=b.search().desc?"DESC("+a+")":a,"?ordinal"===a?d:d+" ?ordinal"}function o(a,c){var d=b.search().sortBy||"?ordinal",e=c?"glyphicon-sort-by-order":"glyphicon-sort-by-alphabet";return d===a?b.search().desc?e+"-alt":e:void 0}this.getResults=h,this.getFacets=k,this.getFacetOptions=l,this.updateSortBy=m,this.getSortClass=o,this.getPerson=i,this.getAchievements=j;var p={entryText:{facetId:"entryText",predicate:"<http://ldf.fi/schema/person_registry/entryText>",name:"Haku",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/norssit/wikipedia> [] .",label:"Wikipedia"},{id:"kansallisbiografia",pattern:"?id <http://ldf.fi/norssit/kansallisbiografia> [] .",label:"Kansallisbiografia"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/norssit/kirjasampo> [] .",label:"Kirjasampo"},{id:"kulttuurisampo",pattern:"?id <http://ldf.fi/norssit/kulttuurisampo> [] .",label:"Kulttuurisampo"},{id:"sotasampo",pattern:"?id <http://ldf.fi/norssit/warsa> [] .",label:"Sotasampo"},{id:"blf",pattern:"?id <http://ldf.fi/norssit/sls_biografi> [] .",label:"BLF"},{id:"wikidata",pattern:"?id <http://ldf.fi/norssit/wikidata> [] .",label:"Wikidata"},{id:"ulan",pattern:"?id <http://ldf.fi/norssit/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/norssit/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/norssit/genicom> [] .",label:"Geni.com"}],enabled:!0,name:"Linkit"},familyName:{facetId:"familyName",predicate:"<http://schema.org/familyName>",name:"Sukunimi"},birthPlace:{facetId:"birthPlace",predicate:"<http://ldf.fi/schema/person_registry/birthPlace>",name:"Syntymäpaikka",enabled:!0},enrollmentYear:{facetId:"enrollmentYear",predicate:"<http://ldf.fi/schema/person_registry/enrollmentYear>",name:"Aloittamisvuosi",enabled:!0},matriculationYear:{facetId:"matriculationYear",predicate:"<http://ldf.fi/schema/person_registry/matriculationYear>",name:"Valmistumisvuosi",enabled:!0},occupation:{facetId:"occupation",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to_title>",name:"Arvo tai ammatti",enabled:!0},education:{facetId:"education",predicate:"^<http://ldf.fi/schema/bioc/education_inheres_in>/a",name:"Koulutus",enabled:!0},organization:{facetId:"organization",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to>",name:"Työpaikka tai oppilaitos",enabled:!0},hobby:{facetId:"hobby",predicate:"<http://schema.org/hobby>",name:"Harrastus"},medal:{facetId:"medal",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to_medal>",name:"Kunniamerkit ja -mitalit",enabled:!0},rank:{facetId:"rank",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to_rank>",name:"Sotilasarvo tai -toimi",enabled:!0}},q=" PREFIX hobbies: <http://ldf.fi/hobbies/>  PREFIX norssit: <http://ldf.fi/norssit/>  PREFIX nach: <http://ldf.fi/norssit/achievements/>  PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX person_registry: <http://ldf.fi/schema/person_registry/>  PREFIX places: <http://ldf.fi/places/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX relatives: <http://ldf.fi/relatives/>  PREFIX schema: <http://schema.org/>  PREFIX schemax: <http://topbraid.org/schemax/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> ",r=' SELECT DISTINCT * WHERE {  {     <RESULT_SET>   }   OPTIONAL { ?id schema:givenName ?givenName . }  OPTIONAL { ?id schema:familyName ?familyName . }  OPTIONAL { ?id person_registry:birthPlace ?birthPlace . }   OPTIONAL { ?id norssit:ordinal ?ordinal . }   OPTIONAL { ?id norssit:register_id ?registerNumber . }   OPTIONAL { ?id schema:birthDate ?birthDate . }  OPTIONAL { ?id schema:deathDate ?deathDate . }  OPTIONAL { ?id schema:hobby/skos:prefLabel ?hobby . }  OPTIONAL { ?id schema:image ?images . }  OPTIONAL { ?id dct:description ?description . }  OPTIONAL { ?id person_registry:pageNumber ?pageNumber . }  OPTIONAL { ?id person_registry:pageImageURL ?pageImageURL . }  OPTIONAL { ?id person_registry:relatedNorssi ?relatedNorssi . }  OPTIONAL { ?id person_registry:enrollmentYear ?enrollmentYear . }  OPTIONAL { ?id person_registry:matriculationYear ?matriculationYear . }  OPTIONAL { ?id person_registry:entryText ?entryText . }  OPTIONAL { ?id norssit:wikipedia ?wikipedia . }  OPTIONAL { ?id norssit:viaf ?viaf . }  OPTIONAL { ?id norssit:kansallisbiografia ?kansallisbiografia . }  OPTIONAL { ?id norssit:wikidata ?wikidata . }  OPTIONAL { ?id norssit:ulan ?ulan . }  OPTIONAL { ?id norssit:warsa ?warsa . }  OPTIONAL { ?id norssit:kirjasampo ?kirjasampo . }  OPTIONAL { ?id norssit:kulttuurisampo ?kulttuurisampo . }  OPTIONAL { ?id norssit:kb ?kb . }  OPTIONAL { ?id norssit:genitree ?genitree . }  OPTIONAL { ?id norssit:genicom ?genicom . }  OPTIONAL { ?id norssit:sls_biografi ?blf . }  OPTIONAL { ?id ^bioc:title_inheres_in/bioc:relates_to_title/skos:prefLabel ?occupation . }  OPTIONAL { ?id ^bioc:title_inheres_in/bioc:relates_to/skos:prefLabel ?organization . }  OPTIONAL {   	?id bioc:has_family_relation [    	bioc:inheres_in ?relative__id ;      	a/skos:prefLabel ?relative__type ] .    	FILTER (LANG(?relative__type)="fi")    	?relative__id schema:familyName ?relative__familyName ; schema:givenName ?relative__givenName .		BIND (replace(concat(?relative__givenName," ",?relative__familyName),"[(][^)]+[)]s*","") AS ?relative__name)   }  BIND(EXISTS {    ?ach rdfs:subPropertyOf* nach:involved_in .    ?id ?ach ?achievement__id .   } AS ?hasAchievements)  }',s=q+" SELECT DISTINCT ?id ?label ?wikipedia {   VALUES ?person { <ID> }   ?ach rdfs:subPropertyOf* nach:involved_in .  ?person ?ach ?id .   ?id skos:prefLabel ?label .  ?id norssit:wikipedia|norssit:www ?wikipedia . } ",t={endpointUrl:e,usePost:!0},u={endpointUrl:t.endpointUrl,rdfClass:"<http://xmlns.com/foaf/0.1/Person>",constraint:"?id <http://ldf.fi/norssit/ordinal> ?ordinal . ?id <http://schema.org/familyName> ?familyName .",preferredLang:"fi"},v={mapper:g,queryTemplate:r,prefixes:q,paging:!0,pagesPerQuery:2},w=new d(t,v),x=new f(t,g)}angular.module("facetApp").service("norssitService",a),a.$inject=["$q","$location","_","FacetResultHandler","SPARQL_ENDPOINT_URL","AdvancedSparqlService","personMapperService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){var b=r.replace("<RESULT_SET>",a.constraint.join(" "));return y.getObjectsNoGrouping(b)}function h(a){var b=a.constraint.join(" "),c=s.replace("<RESULT_SET>",b);return y.getObjectsNoGrouping(c)}function i(a){var b=t.replace(/<RESULT_SET>/g,a.constraint.join(" "));return y.getObjectsNoGrouping(b)}function j(a){return y.getObjectsNoGrouping(u.replace(/<RESULT_SET>/g,a.constraint.join(" ")))}function k(a){return y.getObjectsNoGrouping(v.replace(/<RESULT_SET>/g,a.constraint.join(" ")))}function l(b){var c=[this.getResults1(b),this.getResultsYears(b),this.getResultsTopTitles(b),this.getResultsTopOrgs(b),this.getResultsTopSchools(b)];return a.all(c)}function m(b){var c=[this.getResults1(b)];return a.all(c)}function n(){var b=angular.copy(p);return a.when(b)}function o(){return x}this.getResults=l,this.getResults1=g,this.getResults2=m,this.getResultsYears=h,this.getResultsTopTitles=i,this.getResultsTopOrgs=j,this.getResultsTopSchools=k,this.getFacets=n,this.getFacetOptions=o;var p={entryText:{facetId:"entryText",predicate:"<http://ldf.fi/schema/person_registry/entryText>",name:"Haku",enabled:!0},link:{facetId:"link",choices:[{id:"wikipedia",pattern:"?id <http://ldf.fi/norssit/wikipedia> [] .",label:"Wikipedia"},{id:"kansallisbiografia",pattern:"?id <http://ldf.fi/norssit/kansallisbiografia> [] .",label:"Kansallisbiografia"},{id:"kirjasampo",pattern:"?id <http://ldf.fi/norssit/kirjasampo> [] .",label:"Kirjasampo"},{id:"kulttuurisampo",pattern:"?id <http://ldf.fi/norssit/kulttuurisampo> [] .",label:"Kulttuurisampo"},{id:"sotasampo",pattern:"?id <http://ldf.fi/norssit/warsa> [] .",label:"Sotasampo"},{id:"blf",pattern:"?id <http://ldf.fi/norssit/sls_biografi> [] .",label:"BLF"},{id:"wikidata",pattern:"?id <http://ldf.fi/norssit/wikidata> [] .",label:"Wikidata"},{id:"ulan",pattern:"?id <http://ldf.fi/norssit/ulan> [] .",label:"ULAN"},{id:"viaf",pattern:"?id <http://ldf.fi/norssit/viaf> [] .",label:"VIAF"},{id:"genicom",pattern:"?id <http://ldf.fi/norssit/genicom> [] .",label:"Geni.com"}],enabled:!0,name:"Linkit"},familyName:{facetId:"familyName",predicate:"<http://schema.org/familyName>",name:"Sukunimi"},birthPlace:{facetId:"birthPlace",predicate:"<http://ldf.fi/schema/person_registry/birthPlace>",name:"Syntymäpaikka",enabled:!0},enrollmentYear:{facetId:"enrollmentYear",predicate:"<http://ldf.fi/schema/person_registry/enrollmentYear>",name:"Aloittamisvuosi",enabled:!0},matriculationYear:{facetId:"matriculationYear",predicate:"<http://ldf.fi/schema/person_registry/matriculationYear>",name:"Valmistumisvuosi",enabled:!0},occupation:{facetId:"occupation",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/a",name:"Arvo tai ammatti",enabled:!0},education:{facetId:"education",predicate:"^<http://ldf.fi/schema/bioc/education_inheres_in>/a",name:"Koulutus",enabled:!0},organization:{facetId:"organization",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to>",name:"Työpaikka tai oppilaitos",enabled:!0},hobby:{facetId:"hobby",predicate:"<http://schema.org/hobby>",name:"Harrastus"},medal:{facetId:"medal",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to_medal>",name:"Kunniamerkit ja -mitalit",enabled:!0},rank:{facetId:"rank",predicate:"^<http://ldf.fi/schema/bioc/title_inheres_in>/<http://ldf.fi/schema/bioc/relates_to_rank>",name:"Sotilasarvo tai -toimi",enabled:!0}},q=" PREFIX hobbies: <http://ldf.fi/hobbies/>  PREFIX norssit: <http://ldf.fi/norssit/>  PREFIX nach: <http://ldf.fi/norssit/achievements/>  PREFIX owl: <http://www.w3.org/2002/07/owl#>  PREFIX person_registry: <http://ldf.fi/schema/person_registry/>  PREFIX places: <http://ldf.fi/places/>  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>  PREFIX relatives: <http://ldf.fi/relatives/>  PREFIX schema: <http://schema.org/>  PREFIX schemax: <http://topbraid.org/schemax/>  PREFIX dct: <http://purl.org/dc/terms/>  PREFIX foaf: <http://xmlns.com/foaf/0.1/>  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>  PREFIX xml: <http://www.w3.org/XML/1998/namespace>  PREFIX bioc: <http://ldf.fi/schema/bioc/>  PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> ",r=q+" SELECT distinct ?occupation ?education ?organization ?eduorganization ?id   WHERE {  	 { <RESULT_SET> }   { ?evt bioc:education_inheres_in ?id ; a/skos:prefLabel ?education .     OPTIONAL { ?evt bioc:relates_to ?org .	 	?org a schema:EducationalOrganization ; skos:prefLabel ?eduorganization }  }  UNION  { ?evt bioc:title_inheres_in ?id      ; a ?cls .    FILTER (?cls != bioc:Title)    ?cls skos:prefLabel ?occupation .    OPTIONAL { ?evt bioc:relates_to/skos:prefLabel ?organization }  }}",s=q+" SELECT ?year ?index (count(distinct ?id) AS ?count)  WHERE {   { <RESULT_SET> }   VALUES (?prop ?index) {      (person_registry:enrollmentYear 0)      (person_registry:matriculationYear 1) }   ?id ?prop ?year .   } GROUP BY ?year ?index ORDER BY ?year ",t=q+" SELECT ?label ?year (count (distinct ?id) AS ?count)  WHERE {     {     SELECT ?class (count (distinct ?id) AS ?no)     WHERE {       ?class rdfs:subClassOf+ bioc:Title .       ?evt bioc:relates_to_title ?class ;            bioc:title_inheres_in ?id .         { <RESULT_SET> }     } GROUP BY ?class ORDER BY desc(?no) LIMIT 5     }     ?class skos:prefLabel ?label .     ?evt bioc:relates_to_title ?class ;          bioc:title_inheres_in ?id ;          schema:startDate ?date .     { <RESULT_SET> }  	 BIND (floor(year(?date)/10)*10 AS ?year)  } GROUP BY ?label ?year ORDER by ?year ",u=q+"SELECT ?label ?year (count (distinct ?id) AS ?count)   WHERE {     {     SELECT ?org (count (distinct ?id) AS ?no)     WHERE {   	   ?evt bioc:title_inheres_in ?id ;       		bioc:relates_to ?org . 		?org a foaf:Organization .       { <RESULT_SET> }     } GROUP BY ?org ORDER BY desc(?no) LIMIT 5     }     ?org skos:prefLabel ?label .     ?evt bioc:title_inheres_in ?id ;     	  bioc:relates_to ?org;          schema:startDate ?date .     { <RESULT_SET> }  	 BIND (floor(year(?date)/10)*10 AS ?year)  } GROUP BY ?label ?year ORDER by ?year ",v=q+" SELECT ?label ?year (count (distinct ?id) AS ?count)  WHERE {     {     SELECT ?org (count (distinct ?id) AS ?no)     WHERE {   	   ?evt bioc:education_inheres_in ?id ;       		bioc:relates_to ?org .  	   ?org a schema:EducationalOrganization       { <RESULT_SET> }     } GROUP BY ?org ORDER BY desc(?no) LIMIT 5     }     ?org skos:prefLabel ?label .    ?evt bioc:education_inheres_in ?id ;     	  bioc:relates_to ?org;          schema:startDate ?date .     { <RESULT_SET> }  	 BIND (floor(year(?date)/10)*10 AS ?year) } GROUP BY ?label ?year ORDER by ?year ",w=f,x={endpointUrl:w,rdfClass:"<http://xmlns.com/foaf/0.1/Person>",preferredLang:"fi"},y=new d(w,e)}angular.module("facetApp").service("norssitVisuService",a),a.$inject=["$q","$location","_","AdvancedSparqlService","objectMapperService","SPARQL_ENDPOINT_URL"]}(),function(){"use strict";function a(a,b,c,d){function e(d,e){var f;return f="www.norssit.fi"===a.host()?"/navbar-fi.html":"navbar-fi.html",b(f).then(function(a){return e.html(a),b("views/subnavbar.html")}).then(function(a){return angular.element("#subnav").html(a),c(e.contents())(d)})}function f(){function a(){d.open({templateUrl:"views/help.html",size:"lg"})}var b=this;b.showHelp=a}return{link:e,controller:f,controllerAs:"vm"}}angular.module("facetApp").directive("wsNavbar",a),a.$inject=["$location","$templateRequest","$compile","$uibModal"]}(),function(){"use strict";function a(a){function b(){return a.$close()}function c(a,b,c){return a.replace(""+b,""+(b+c))}function d(a){g.pageUrl=c(g.pageUrl,g.pageNo,a),g.pageNo=g.pageNo+a}function e(){return d(1)}function f(){return d(-1)}var g=this;g.close=b,g.nextPage=e,g.previousPage=f,g.$onInit=function(){g.person=g.resolve.person,g.pageUrl=g.resolve.person.pageImageURL,g.pageNo=parseInt(g.resolve.person.pageNumber)}}angular.module("facetApp").component("registerPageModal",{templateUrl:"views/page-modal.html",controller:a,bindings:{resolve:"<",close:"&",dismiss:"&"}}),a.$inject=["$scope"]}(),function(){"use strict";function a(a,b,c,d){function e(){d.getPerson(a.personId).then(function(a){return h.person=a,a}).then(function(a){return d.getAchievements(a)})["catch"](g)}function f(){b.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return h.person}}})}function g(a){h.isLoadingResults=!1,h.error=a}var h=this;h.openPage=f,e()}angular.module("facetApp").controller("DetailController",a),a.$inject=["$stateParams","$uibModal","_","norssitService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){b.reload()}function k(){r.tableParams=new g({count:e},{getData:n})}function l(a){c.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function m(){var a=f.getFacetOptions();return a.initialState=i.getFacetValuesFromUrlParams(),a}function n(a){return r.isLoadingResults=!0,r.pager.getPage(a.page()-1,a.count()).then(function(a){return r.pager.getTotalCount().then(function(b){return r.tableParams.total(b),a}).then(function(a){return r.isLoadingResults=!1,a})})}function o(a,b){return i.updateUrlParams(b),r.previousSelections=d.clone(b.constraint),p(b)}function p(a){r.isLoadingResults=!0,f.getResults(a).then(function(a){r.pager=a,r.tableParams?(r.tableParams.page(1),r.tableParams.reload()):k()})}function q(a){return f.updateSortBy(a),p({constraint:r.previousSelections})}var r=this;r.openPage=l,r.removeFacetSelections=j,r.sortBy=q,r.getSortClass=f.getSortClass;var s=a.$on("sf-initial-constraints",function(a,b){o(a,b),s()});a.$on("sf-facet-constraints",o),f.getFacets().then(function(b){r.facets=b,r.facetOptions=m(),r.facetOptions.scope=a,r.handler=new h(r.facetOptions)})}angular.module("facetApp").controller("TableController",a),a.$inject=["$scope","$state","$uibModal","_","RESULTS_PER_PAGE","norssitService","NgTableParams","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.reload()}function j(a){d.open({component:"registerPageModal",size:"lg",resolve:{person:function(){return a}}})}function k(a){return f.getAchievements(a)}function l(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function m(){var a=e.uniqueId();w=a,u.isLoadingResults=!0,s++<=t?u.pager.getPage(s-1,24).then(function(b){a===w&&(u.people=u.people.concat(b),u.isLoadingResults=!1)})["catch"](r):u.isLoadingResults=!1}function n(){return u.isLoadingResults||s>t}function o(a){return f.updateSortBy(a),q({constraint:u.previousSelections})}function p(a,b){return u.previousSelections&&e.isEqual(b.constraint,u.previousSelections)?void 0:(u.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),q(b))}function q(a){u.isLoadingResults=!0,u.people=[],u.error=void 0;var b=e.uniqueId();x=b,s=0,f.getResults(a).then(function(a){return a.getMaxPageNo().then(function(b){return[a,b]})}).then(function(a){return x===b?(u.pager=a[0],t=a[1],u.isLoadingResults=!1,m()):void 0})["catch"](r)}function r(a){u.isLoadingResults=!1,u.error=a}var s,t,u=this;u.openPage=j,u.nextPage=m,u.isScrollDisabled=n,u.removeFacetSelections=i,u.sortBy=o,u.getSortClass=f.getSortClass,u.getAchievements=k,u.people=[];var v=a.$on("sf-initial-constraints",function(a,b){p(a,b),v()});a.$on("sf-facet-constraints",p),f.getFacets().then(function(b){u.facets=b,u.facetOptions=l(),u.facetOptions.scope=a,u.handler=new g(u.facetOptions)});var w,x}angular.module("facetApp").controller("CardsController",a),a.$inject=["$scope","$location","$state","$uibModal","_","norssitService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return r.previousSelections&&e.isEqual(b.constraint,r.previousSelections)?void 0:(r.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b).then(function(a){google.charts.setOnLoadCallback(function(){l("occupation","Myöhempi arvo tai ammatti","chart_occupation")}),google.charts.setOnLoadCallback(function(){l("organization","Työnantajat tai jäsenyydet järjestöissä","chart_organization")}),google.charts.setOnLoadCallback(function(){l("eduorganization","Opiskelupaikkoja Norssin jälkeen","chart_eduorganization")}),google.charts.setOnLoadCallback(function(){l("education","Koulutus Norssin jälkeen","chart_education")}),google.charts.setOnLoadCallback(m)}))}function l(a,b,c){var d=n(r.people,a),e=google.visualization.arrayToDataTable([[b,"Lukumäärä"]].concat(d)),f={title:b},g=new google.visualization.PieChart(document.getElementById(c));g.draw(e,f)}function m(){var a="education",b="eduorganization",c={},d={},e=10;$.each(r.people,function(e,f){if(f.hasOwnProperty(a)&&f.hasOwnProperty(b)){var g=f[a],h=f[b];c.hasOwnProperty(g)?c[g]+=1:c[g]=1,d.hasOwnProperty(h)?d[h]+=1:d[h]=1}}),c=$.map(c,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]}),d=$.map(d,function(a,b){return[[b,a]]}).sort(function(a,b){return b[1]-a[1]});var f={},g={};$.each(c,function(a,b){f[b[0]]={index:e-1>a?a:e-1}}),$.each(d,function(a,b){g[b[0]]={index:e-1>a?a:e-1}});var h=$.map(new Array(Math.min(e,c.length)),function(a,b){return[$.map(new Array(Math.min(e,d.length)),function(a,b){return 0})]});$.each(r.people,function(c,d){if(d.hasOwnProperty(a)&&d.hasOwnProperty(b)){var e=d[a],i=d[b];h[f[e].index][g[i].index]+=1}});for(var i=[],j=0;j<h.length;j++)for(var k=0;k<h[j].length;k++)i.push([e-1>k?d[k][0]:"muu laitos",e-1>j?c[j][0]:"muu arvo",h[j][k]]);var l=new google.visualization.DataTable;l.addColumn("string",b),l.addColumn("string",a),l.addColumn("number","Weight"),l.addRows(i);var m={title:"Otsikko",sankey:{node:{label:{fontSize:14,color:"#000",bold:!0},labelPadding:12}}},n=new google.visualization.Sankey(document.getElementById("chart_sankey"));n.draw(l,m)}function n(a,b){return o(a,b).sort(function(a,b){return b[1]-a[1]})}function o(a,b){var c={};return $.each(a,function(a,d){if(d.hasOwnProperty(b)){var e=d[b];c.hasOwnProperty(e)?c[e]+=1:c[e]=1}}),$.map(c,function(a,b){return[[b,a]]})}function p(a){r.isLoadingResults=!0,r.people=[],r.years=[],r.topTitles=[],r.topOrgs=[],r.error=void 0;var b=e.uniqueId();return t=b,f.getResults2(a).then(function(a){return t===b?(r.isLoadingResults=!1,r.people=a[0],a):void 0})["catch"](q)}function q(a){console.log(a),r.isLoadingResults=!1,r.error=a}var r=this;r.people=[],r.startYear=[],r.topTitles=[],r.topOrgs=[],r.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line","sankey"]});var s=a.$on("sf-initial-constraints",function(a,b){k(a,b),s()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){r.facets=b,r.facetOptions=j(),r.facetOptions.scope=a,r.handler=new g(r.facetOptions)});var t}angular.module("facetApp").controller("VisuController",a),a.$inject=["$scope","$location","$q","$state","_","norssitVisuService","FacetHandler","facetUrlStateHandlerService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){d.reload()}function j(){var a=f.getFacetOptions();return a.initialState=h.getFacetValuesFromUrlParams(),a}function k(a,b){return r.previousSelections&&e.isEqual(b.constraint,r.previousSelections)?void 0:(r.previousSelections=e.clone(b.constraint),h.updateUrlParams(b),p(b).then(function(a){google.charts.setOnLoadCallback(function(){m("0","Aloitusvuosi Norssissa","chart_enrollmentYear")}),google.charts.setOnLoadCallback(function(){m("1","Valmistumisvuosi Norssista","chart_matriculationYear")}),google.charts.setOnLoadCallback(function(){l(r.topSchools,"Yleisimmät oppilaitokset vuosikymmenittäin","chart_topschools")}),google.charts.setOnLoadCallback(function(){l(r.topTitles,"Yleisimmät virat ja toimet vuosikymmenittäin","chart_topeducation")}),google.charts.setOnLoadCallback(function(){l(r.topOrgs,"Yleisimmät työnantajat vuosikymmenittäin","chart_toporganization")})}))}function l(a,b,c){var d={},e=0;if($.each(a,function(a,b){if(b.hasOwnProperty("label")){var c=b.label;d.hasOwnProperty(c)||(d[c]={},e++),d[c][parseInt(b.year)]=parseInt(b.count)}}),d==={}||0==e){a=[];for(var f=1890;2e3>f;f+=10)a.push({count:"0",label:"No results",year:""+f});return l(a,b,c)}var a=new google.visualization.DataTable;a.addColumn("string","X");for(var g={},h=1,i=[],f=0;e>f;f++)i.push(0);$.each(d,function(b,c){a.addColumn("number",b),$.each(c,function(a,b){var c=a;g.hasOwnProperty(c)||(g[c]=[c].concat(i)),g[c][h]+=parseInt(b)}),h++}),g=$.map(g,function(a,b){return[a]});var j=$.map(g,function(a,b){return[a[0]]});a.addRows(g);var k={title:b,hAxis:{title:"Vuosikymmen",ticks:j,gridlines:{color:"none"}},vAxis:{title:"Henkilöä"}},m=new google.visualization.ColumnChart(document.getElementById(c));m.draw(a,k)}function m(a,b,c){var d=new google.visualization.DataTable,e={title:b,legend:{position:"none"},tooltip:{format:"none"},colors:["green"],hAxis:{slantedText:!1,maxAlternation:1,format:""},vAxis:{maxValue:4},width:"95%",bar:{groupWidth:"88%"},height:500},f=new google.visualization.ColumnChart(document.getElementById(c));d.addColumn("string","Vuosi"),d.addColumn("number","Oppilaita");var g=$.map(n(r.years,a),function(a,b){return[[""+a[0],a[1]]]});d.addRows(g),f.draw(d,e)}function n(a,b){var c=[];if($.each(a,function(a,d){d.hasOwnProperty("index")&&d.index==b&&c.push([parseInt(d.year),parseInt(d.count)])}),c=o(c),c.length<2){var d=parseInt(c[0][0])-1;c=[[d,0]].concat(c),d=parseInt(c[c.length-1][0])+1,c.push([d,0])}return c}function o(a){if(a.length<2)return a;for(var b=[],c=parseInt(a[0][0]),d=0;d<a.length;d++){for(var e=parseInt(a[d][0]);e>c;)b.push([c,0]),c++;b.push(a[d]),c++}return b}function p(a){r.isLoadingResults=!0,r.people=[],r.years=[],r.topTitles=[],r.topOrgs=[],r.topSchools=[],r.error=void 0;var b=e.uniqueId();return t=b,f.getResults(a).then(function(a){return t===b?(r.isLoadingResults=!1,r.people=a[0],r.years=a[1],r.topTitles=a[2],r.topOrgs=a[3],r.topSchools=a[4],a):void 0})["catch"](q)}function q(a){console.log(a),r.isLoadingResults=!1,r.error=a}var r=this;r.people=[],r.startYear=[],r.topTitles=[],r.topOrgs=[],r.removeFacetSelections=i,google.charts.load("current",{packages:["corechart","line"]});var s=a.$on("sf-initial-constraints",function(a,b){k(a,b),s()});a.$on("sf-facet-constraints",k),f.getFacets().then(function(b){r.facets=b,r.facetOptions=j(),r.facetOptions.scope=a,r.handler=new g(r.facetOptions)});var t}angular.module("facetApp").controller("VisuController2",a),a.$inject=["$scope","$location","$q","$state","_","norssitVisuService","FacetHandler","facetUrlStateHandlerService"]}(),angular.module("facetApp").run(["$templateCache",function(a){"use strict";a.put("views/achievements-popover.html",'<img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-show="!person.achievements"> <div class="achievement-list"> <ul class="list-unstyled"> <li ng-repeat="achievement in person.achievements"><a ng-href="{{ achievement.wikipedia }}">{{ achievement.label | castArray | first }}</a></li> </ul> </div>'),a.put("views/help.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-10 text-left"> <h3 class="modal-title">Norssit</h3> </div> <div class="col-xs-2"> <a href="#" ng-click="$close()" class="no-decoration btn-lg pull-right glyphicon glyphicon-remove"></a> </div> </div> </div> <div class="modal-body"> <p> Matrikkelin tietoja voi selata käyttöliittymässä käyttämällä vasemmalla olevia suodattimia. Hakeaksesi rekisterillä tekstihaulla, kirjoita haku \'Haku\'-kenttään. Poistaaksesi hakurajauksen, paina X-nappia hakukentän oikealla puolella. Jokaisella suodattimella on oma hakukenttä sekä lista suodattimen vaihtoehdoista, josta voi valita haluamansa ehdon. Tulosten määrä vaihtoehdolla näkyy suluissa valinnan nimen perässä. Valinnan voi poistaa valitsemalla vaihtoehdon \'-- No Selection --\'. Jokaisesta suodattimesta voi valita vain yhden vaihtoehdon, jolloin henkilölistausta suodatetaan valintojen perusteella. Tuloslistaa voi suodattaa käyttäen eri suodattimia yhdessä. </p> <p> <h4>Suodattimien valinta:</h4> <ol> <li>Valitse joku suodattimista ja avaa suodatin painamalla \'+\'-nappia suodattimen otsikon oikealla puolella.</li> <li>Valitse suodattimeen arvo listalta tai hae kirjoittamalla listan yllä olevaan tekstikenttään. Jos suodatinehtoa haetaan tekstikentän avulla alla oleva lista suodattimista päivittyy kirjoittaessa.</li> <li>Suodatinehdon voi valita klikkaamalla sitä listalta, tai poistaa valitsemalla \'-- No Selection --\' listan alusta. </li> <li>Henkilöiden lista päivittyy suodattimien oikealla puolella.</li> <li>Tuloksia voi nyt suodattaa tarvittaessa lisää toistamalla toisella suodattimella edelliset askeleet 1-4.</li> </ol> </p> </div>'),a.put("views/norssit.cards.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-1 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="http://www.norssit.fi/images/norssi_logo.jpg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/norssit.description.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/norssit.facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10"> <b>Järjestä:</b> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?ordinal\')">Matrikkelijärjestys</a> <span ng-class="vm.getSortClass(\'?ordinal\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">Sukunimi</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/norssit.cards.partial.html\'"></div> </div> </div> </div>'),a.put("views/norssit.cards.partial.html",'<img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div infinite-scroll="vm.nextPage()" infinite-scroll-disabled="vm.isScrollDisabled()" infinite-scroll-distance="0"> <div class="row"> <div ng-repeat="person in vm.people" class="person-container"> <div class="col-xs-12 col-sm-12 person-panel col-md-4 col-lg-3"> <div class="thumbnail"> <a ui-sref="detail({ personId: person.id })"> <div class="person-profile-img vertical-center"> <img class="img img-responsive center-block media-middle" ng-src="{{ ::person.images | first }}"> </div> </a> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12 col-sm-3 col-md-12"> <b><a ui-sref="detail({ personId: person.id })">{{ ::person.registerNumber }}. {{ ::person.givenName }} {{ ::person.familyName }}</a></b> </div> <div class="col-xs-12 col-sm-9 col-md-12"> <p ng-if="::(person.birthPlace || person.birthDate || person.deathDate)"> &#8727;&nbsp;<span ng-if="::person.birthPlace">{{ ::person.birthPlace }}</span> {{ ::person.birthDate || \'?\' | date:\'dd.MM.yyyy\' }} <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathDate | date:\'dd.MM.yyyy\' }}</span> </p> </div> <div class="col-xs-12"> <p>Norssi {{ ::person.enrollmentYear || \'?\' }} &ndash; {{ ::person.matriculationYear || \'?\' }}</p> </div> <div ng-if="::person.occupation" class="col-xs-12"> <p>{{ ::person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Näytä matrikkeliteksti" ng-attr-title="{{ showText ? \'Piilota matrikkeliteksti\' : \'Näytä matrikkeliteksti\' }}" href="" ng-click="showText = !showText"><span class="glyphicon" ng-class="{ \'glyphicon-collapse-down\': !showText, \'glyphicon-collapse-up\': showText }" aria-hidden="true"></span></a> <a title="Avaa matrikkelisivu" href="" ng-click="::vm.openPage(person)"><span class="glyphicon glyphicon-book" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="::person.hasAchievements" class="col-xs-6"> <a href="" class="link" ng-click="vm.getAchievements(person)" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto right">Saavutukset</a> </div> <div ng-if="::person.wikipedia" class="col-xs-6"> <a ng-href="{{ ::person.wikipedia }}">Wikipedia</a> </div> <div ng-if="::person.kansallisbiografia" class="col-xs-6"> <a ng-href="{{ ::person.kansallisbiografia }}">Kansallisbiografia</a> </div> <div ng-if="::person.warsa" class="col-xs-6"> <a ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsa }}">Sotasampo</a> </div> <div ng-if="::person.kirjasampo" class="col-xs-6"> <a ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="::person.kulttuurisampo" class="col-xs-6"> <a ng-href="{{ ::person.kulttuurisampo }}">Kulttuurisampo</a> </div> <div ng-if="::person.blf" class="col-xs-6"> <a ng-href="{{ ::person.blf }}">BLF</a> </div> <div ng-if="::person.ulan" class="col-xs-6"> <a ng-href="{{ ::person.ulan }}">ULAN</a> </div> <div ng-if="::person.viaf" class="col-xs-6"> <a ng-href="{{ ::person.viaf }}">VIAF</a> </div> <div ng-if="::person.genicom" class="col-xs-6"> <a ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="::person.genitree" class="col-xs-6"> <a ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="::person.relative" class="row"> <div class="col-xs-12">Sukulaisnorssit:</div> <div class="col-sm-6 col-md-12" ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="detail({ personId: relative.id })">{{ ::relative.name }}</a> </div> </div> <div ng-if="::person.hobby" class="row"> <div class="col-md-12"> <p>Harrastukset: {{ ::person.hobby | castArray | join: \', \' }}</p> </div> </div> <div uib-collapse="!showText"> <hr> <p>{{ ::person.entryText }}</p> </div> </div> </div> </div> </div> <div class="clearfix visible-lg-block" ng-if="($index + 1) % 4 == 0"></div> <div class="clearfix visible-md-block" ng-if="($index + 1) % 3 == 0"></div> <div class="clearfix visible-sm-block" ng-if="($index + 1) % 1 == 0"></div> <div class="clearfix visible-xs-block" ng-if="($index + 1) % 1 == 0"></div> </div> </div> </div>'),
a.put("views/norssit.description.partial.html",'<h1>Vanhat Norssit semanttisessa webissä</h1> <h4 class="norssi-slogan">Non scholae sed vitae</h4> <p> Norssien matrikkelihaku. Voit rajata tulosta tekemällä valintoja suodattimista ja selata henkilöihin liittyvää tietoa linkkien kautta. Lähde: <a href="http://www.norssit.fi/matrikkelit.html">Helsingin Norssin matrikkeli 1867-1992</a> </p>'),a.put("views/norssit.description.statistics.partial.html",'<h1>Vanhat Norssit semanttisessa webissä</h1> <h4 class="norssi-slogan">Non scholae sed vitae</h4> <p> Norssimatrikkelista luotuja tilastoja. Esitykset luodaan vasemmanpuoleisissa suodattimissa tehtyjen valintojen perusteella. Lähde: <a href="http://www.norssit.fi/matrikkelit.html">Helsingin Norssin matrikkeli 1867-1992</a> </p>'),a.put("views/norssit.detail.html",'<div class="container-fluid"> <div class="row"> <div class="col-sm-12" ng-show="!vm.person && !vm.error"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif"> </div> <div uib-alert ng-if="vm.error"> {{ vm.error }} </div> <div class="col-sm-12 col-md-8 text-center" ng-show="vm.person"> <h1>{{ vm.person.registerNumber }}. {{ vm.person.givenName }} {{ vm.person.familyName }}</h1> <div class="thumbnail"> <div class="person-profile-img"> <div class="row"> <div class="col-sm-12 text-center"> <img ng-repeat="img in vm.person.images" class="person-img img img-responsive" ng-src="{{ img }}"> </div> </div> </div> <div class="caption"> <div class="visible-caption"> <div class="row"> <div class="col-xs-12"> <p ng-if="(vm.person.birthPlace || vm.person.birthDate || vm.person.deathDate)"> &#8727;&nbsp;<span ng-if="vm.person.birthPlace">{{ vm.person.birthPlace }}</span> {{ vm.person.birthDate | date:\'dd.MM.yyyy\' }} <span ng-if="vm.person.deathDate">&dagger;&nbsp;{{ vm.person.deathDate | date:\'dd.MM.yyyy\' }}</span> </p> </div> <div class="col-xs-12"> <p>Norssi {{ vm.person.enrollmentYear || \'?\' }} &ndash; {{ vm.person.matriculationYear || \'?\' }}</p> </div> <div ng-if="vm.person.occupation" class="col-xs-12"> <p>{{ vm.person.occupation | castArray | join:\', \' }}</p> </div> <div class="col-xs-12 icon-menu"> <a title="Avaa matrikkelisivu" href="" ng-click="vm.openPage(vm.person)"><span class="glyphicon glyphicon-book" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ vm.person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </div> </div> <div class="row"> <div ng-if="vm.person.wikipedia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.wikipedia }}">Wikipedia</a> </div> <div ng-if="vm.person.kansallisbiografia" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.kansallisbiografia }}">Kansallisbiografia</a> </div> <div ng-if="vm.person.warsa" class="col-xs-6 col-xs-offset-3"> <a ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ vm.person.warsa }}">Sotasampo</a> </div> <div ng-if="vm.person.kirjasampo" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.kirjasampo }}">Kirjasampo</a> </div> <div ng-if="vm.person.kulttuurisampo" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.kulttuurisampo }}">Kulttuurisampo</a> </div> <div ng-if="vm.person.blf" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.blf }}">BLF</a> </div> <div ng-if="vm.person.ulan" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.ulan }}">ULAN</a> </div> <div ng-if="vm.person.viaf" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.viaf }}">VIAF</a> </div> <div ng-if="vm.person.genicom" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.genicom }}">Kotisivu (Geni.com)</a> </div> <div ng-if="vm.person.genitree" class="col-xs-6 col-xs-offset-3"> <a ng-href="{{ vm.person.genitree }}">Sukupuu (Geni.com)</a> </div> </div> <div ng-if="vm.person.relative" class="row padded-row"> <div class="col-xs-12"><h4>Sukulaisnorssit:</h4></div> <div class="col-sm-6 col-md-12" ng-repeat="relative in vm.person.relative | castArray"> {{ relative.type }}<a ui-sref="detail({ personId: relative.id })"> {{ relative.name }}</a> </div> </div> <div ng-if="vm.person.hobby" class="row padded-row"> <div class="col-md-12"> <p><b>Harrastukset:</b> {{ vm.person.hobby | castArray | join: \', \' }}</p> </div> </div> <div class="entry-text text-left"> <hr> <p>{{ vm.person.entryText }}</p> </div> </div> </div> </div> </div> <div class="col-md-4 text-left" ng-if="vm.person.hasAchievements"> <h3>Saavutuksia</h3> <img ng-if="!vm.person.achievements" class="loading-img" src="images/loading-lg.7ba320e0.gif"> <div class="col-sm-6" ng-repeat="achievement in vm.person.achievements"><a ng-href="{{ achievement.wikipedia }}">{{ achievement.label | castArray | first }}</a></div> </div> </div> </div>'),a.put("views/norssit.facets.partial.html",'<a href="" ng-click="vm.removeFacetSelections()">Poista kaikki valinnat</a> <div class="facets"> <seco-text-facet data-options="vm.facets.entryText"></seco-text-facet> <div class="show-facets row"> <div class="col-xs-12"> <button class="btn btn-default pull-right visible-xs-block visible-sm-block" ng-click="show = !show">{{ show ? \'Piilota fasetit\' : \'Näytä fasetit\' }}</button> </div> </div> <div class="hideable-facets" ng-class="{ \'hidden-sm hidden-xs\': !show }"> <seco-checkbox-facet data-options="vm.facets.link"></seco-checkbox-facet> <seco-basic-facet data-options="vm.facets.occupation"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.education"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.organization"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.familyName"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.hobby"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.birthPlace"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.enrollmentYear"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.matriculationYear"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.medal"></seco-basic-facet> <seco-basic-facet data-options="vm.facets.rank"></seco-basic-facet> </div> </div>'),a.put("views/norssit.table.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-1 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="http://www.norssit.fi/images/norssi_logo.jpg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/norssit.description.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/norssit.facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10"> Järjestä: <span class="sort"> <a href="" ng-click="vm.sortBy(\'?ordinal\')">Matrikkelijärjestys</a> <span ng-class="vm.getSortClass(\'?ordinal\', true)" class="glyphicon" aria-hidden="true"></span> </span> <span class="sort"> <a href="" ng-click="vm.sortBy(\'?familyName\')">Sukunimi</a> <span ng-class="vm.getSortClass(\'?familyName\')" class="glyphicon" aria-hidden="true"></span> </span> <div ng-include="\'views/norssit.table.partial.html\'"></div> </div> </div> </div>'),a.put("views/norssit.table.partial.html",'<table class="table table-striped norssi-table ng-table-responsive" ng-table="vm.tableParams"> <thead> <tr> <th class="col-xs-4">Nimi</th> <th class="col-xs-1">Norssi</th> <th class="col-xs-1">Linkit</th> <th class="col-xs-3"><span class="hidden-xs hidden-sm">Muuta</span></th> <th class="col-xs-3 hidden-xs hidden-sm">Matrikkeliteksti</th> </tr> </thead> <tbody> <tr ng-show="!vm.isLoadingResults" ng-repeat="person in $data"> <td class="person-image-container" data-title="\'Nimi\'"> <div ng-class="::{ \'name-col col-md-12 col-lg-7\': person.images }"> <b><a ui-sref="detail({ personId: person.id })">{{ ::person.registerNumber }}. {{ ::person.givenName }} {{ ::person.familyName }}</a></b><br> &#8727;&nbsp;{{ ::person.birthPlace }} <span ng-if="::(person.birthDate || person.deathDate)"> {{ ::person.birthDate || \'?\' | date:\'dd.MM.yyyy\' }} <span ng-if="::person.deathDate">&dagger;&nbsp;{{ ::person.deathDate | date:\'dd.MM.yyyy\' }}</span> <br> </span> <span class="icon-menu"> <a title="Avaa matrikkelisivu" href="" ng-click="::vm.openPage(person)"><span class="glyphicon glyphicon-book" aria-hidden="true"></span></a> <a title="Data" class="" ng-href="{{ ::person.id }}"><span class="glyphicon glyphicon-hdd" aria-hidden="true"></span></a> </span> </div> <div ng-if="::person.hasImage" class="name-col col-md-12 col-lg-5"> <div ng-repeat="img in ::person.images" ng-class="{ \'col-md-12\': ($first && $last), \'col-sm-6\': !($first && $last) }" class="person-img-col vcenter"> <img uib-popover-template="\'views/profile-image-popover.html\'" popover-trigger="\'mouseenter\'" popover-placement="auto right" popover-append-to-body="true" class="person-image img img-responsive" ng-src="{{ img  }}"> </div> </div> </td> <td data-title="\'Norssi\'"> {{ ::person.enrollmentYear || \'?\' }} &ndash; {{ ::person.matriculationYear || \'?\' }} </td> <td class="links" data-title="\'Linkit\'"> <div ng-if="::person.achievement"> <a href="" uib-popover-template="\'views/achievements-popover.html\'" popover-trigger="\'outsideClick\'" popover-append-to-body="true" popover-placement="auto top">Saavutukset</a> </div> <a class="link" ng-if="::person.wikipedia" ng-href="{{ ::person.wikipedia }}">Wikipedia</a> <a class="link" ng-if="::person.kansallisbiografia" ng-href="{{ ::person.kansallisbiografia }}">Kansallisbiografia</a> <a class="link" ng-if="::person.warsa" ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsa }}">Sotasampo</a> <a class="link" ng-if="::person.kirjasampo" ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a> <a class="link" ng-if="::person.kulttuurisampo" ng-href="{{ ::person.kulttuurisampo }}">Kulttuurisampo</a> <a class="link" ng-if="::person.blf" ng-href="{{ ::person.blf }}">BLF</a> <a class="link" ng-if="::person.ulan" ng-href="{{ ::person.ulan }}">ULAN</a> <a class="link" ng-if="::person.viaf" ng-href="{{ ::person.viaf }}">VIAF</a> <a class="link" ng-if="::person.genicom" ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a> <a class="link" ng-if="::person.genitree" ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a> </td> <td data-title="\'Muuta\'"> <div ng-if="::person.relative"> <span>Sukulaiset: </span><br> <span ng-repeat="relative in person.relative | castArray"> {{ ::relative.type }} <a ui-sref="detail({ personId: relative.id })">{{ ::relative.name }}</a> </span> </div> <button class="page-btn visible-xs-block visible-sm-block btn btn-default" ng-click="::vm.openPage(person)">Matrikkelisivu</button> <div ng-if="::person.hobby"><span>Harrastukset: </span><br>{{ ::person.hobby | join:\', \' }}</div> <button class="page-btn visible-xs-block visible-sm-block btn btn-default" ng-click="::vm.openPage(person)">Matrikkelisivu</button> </td> <td data-title="\'Matrikkeliteksti\'" class="hidden-xs hidden-sm" uib-popover-template="\'views/register-text-popover.html\'" popover-trigger="\'mouseenter\'" popover-append-to-body="true" popover-placement="auto left">{{ ::person.entryText | truncate: 500 : \'...\' : true }}</td> </tr> </tbody> </table> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults">'),a.put("views/norssit.visu.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-1 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="http://www.norssit.fi/images/norssi_logo.jpg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/norssit.description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/norssit.facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_education" style="width: 100%; height: 500px"></div> <div id="chart_eduorganization" style="width: 100%; height: 500px"></div> <div id="chart_occupation" style="width: 100%; height: 500px"></div> <div id="chart_organization" style="width: 100%; height: 500px"></div> <p style="font-family: Arial; font-size:15px; color:black"><strong>Oppilaitoksista saatuja oppiarvoja</strong></p> <div id="chart_sankey" style="width: 100%; height: 700px"></div> </div> </div> </div>'),a.put("views/norssit.visu2.html",'<div class="container-fluid"> <div class="row"> <div class="col-md-1 col-sm-2 col-xs-2 vcenter push-xs-2"> <img src="http://www.norssit.fi/images/norssi_logo.jpg" class="norssi-logo center-block img img-responsive"> </div><!-- DO NOT REMOVE THIS COMMENT, IT IS A HACK\n --><div class="col-xs-9 col-md-8 col-lg-9 vcenter push-xs-9"> <div ng-include="\'views/norssit.description.statistics.partial.html\'"></div> </div> <div class="col-md-3 pull-md-3 col-lg-2"> <div ng-include="\'views/norssit.facets.partial.html\'"></div> </div> <div class="col-md-9 col-lg-10" min-height="500"> <img class="loading-img" src="images/loading-lg.7ba320e0.gif" ng-if="vm.isLoadingResults"> <div id="chart_enrollmentYear"></div> <div id="chart_matriculationYear"></div> <div id="chart_topschools" style="width: 100%; height: 500px"></div> <div id="chart_toporganization" style="width: 100%; height: 500px"></div> <div id="chart_topeducation" style="width: 100%; height: 500px"></div> </div> </div> </div>'),a.put("views/page-modal.html",'<div class="modal-header"> <div class="row"> <div class="col-xs-8"> <h3 class="modal-title">{{ $ctrl.person.ordinal }} {{ $ctrl.person.givenName }} {{ $ctrl.person.familyName }}</h3> </div> <div class="col-xs-4 text-right"> <button class="btn btn-default" ng-click="$ctrl.previousPage()" ng-disabled="$ctrl.pageNo === 1" aria-label="Edellinen sivu"> <span class="glyphicon glyphicon-step-backward"></span> </button> <span>{{ $ctrl.pageNo }}</span> <button class="btn btn-default" ng-click="$ctrl.nextPage()" ng-disabled="$ctrl.pageNo === 716" aria-label="Seuraava sivu"> <span class="glyphicon glyphicon-step-forward"></span> </button> <button ng-click="$ctrl.close()" class="btn btn-default" aria-label="Sulje"> <span aria-hidden="true" class="glyphicon glyphicon-remove"></span> </button> </div> </div> </div><div class="modal-body"> <img class="img img-responsive" ng-src="{{ $ctrl.pageUrl }}"> </div>'),a.put("views/profile-image-popover.html",'<div> <img class="img img-responsive" ng-src="{{ img }}"> </div>'),a.put("views/register-text-popover.html","<div> <pre>{{ person.entryText }}</pre> </div>"),a.put("views/subnavbar.html",'<ul class="nav navbar-nav"> <li><a href="" id="show-help" ng-click="vm.showHelp()"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Ohje</a></li> <li ui-sref-active="active"><a ui-sref="cards"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Ruudukko</a></li> <li ui-sref-active="active"><a ui-sref="table"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span> Lista</a></li> <li class="dropdown" ui-sref-active="{\'active\': \'visualizations.**\'}"> <a class="dropdown-toggle" data-toggle="dropdown" href="" id="statistics"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Tilastoja<span class="caret"></span></a> <ul class="dropdown-menu"> <li ui-sref-active="active"><a ui-sref="visualizations.visu"><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Tilastoja 1</a></li> <li ui-sref-active="active"><a ui-sref="visualizations.visu2"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Tilastoja 2</a></li> </ul> </li> </ul>')}]);