<div infinite-scroll='vm.nextPage()'
  infinite-scroll-disabled='vm.isScrollDisabled()'
  infinite-scroll-distance='0'>
  <div class="row">
    <div ng-repeat="person in vm.people" class="person-container">
      <div class="col-xs-12 col-sm-12 person-panel col-md-4 col-lg-2">
        <div class="thumbnail" ng-mouseenter="enlarge = true" ng-mouseleave="enlarge = false">
          <div class="person-profile-img vertical-center">
            <img class="img img-responsive center-block media-middle" ng-src="{{ ::(vm.toArray(person.image) | first) || 'images/person_placeholder.svg' }}" />
          </div>
          <div class="caption">
            <div class="visible-caption">
              <b>{{ ::person.ordinal }}. {{ ::person.givenName }} {{ ::person.familyName }}</b>
              <p ng-if="::person.birthPlace">{{ ::person.birthPlace }}</p>
              <p ng-if="::(person.birthDate || person.deathDate)">
              &#8727;&nbsp;{{ ::person.birthDate || '?' | date:'dd.MM.yyyy' }}
              <span ng-if=::person.deathDate>&dagger;&nbsp;{{ ::person.deathDate | date:'dd.MM.yyyy' }}</span>
              </p>
              <p>Norssi {{ ::person.enrollmentYear || '?' }} - {{ ::person.matriculationYear || '?' }}</p>
            </div>
            <div uib-collapse="!enlarge" class="person-details">
              <p ng-if="::person.hobby">Harrastukset: {{ ::vm.toArray(person.hobby) | join: ', ' }}</p>
              <a class="link" ng-href="{{ ::person.id }}">Data</a>
              <a href="" class="link" ng-if="::person.achievement"
                uib-popover-template="'views/achievements-popover.html'"
                popover-trigger="'outsideClick'"
                popover-append-to-body="false"
                popover-placement="auto top">Saavutukset</a>
              <a class="link" ng-if="::person.wikipedia" ng-href="{{ ::person.wikipedia }}">Wikipedia</a>
              <a class="link" ng-if="::person.kansallisbiografia" ng-href="{{ ::person.kansallisbiografia }}">Kansallisbiografia</a>
              <a class="link" ng-if="::person.warsa" ng-href="http://www.sotasampo.fi/fi/persons/?uri={{ ::person.warsa }}">Sotasampo</a>
              <a class="link" ng-if="::person.kirjasampo" ng-href="{{ ::person.kirjasampo }}">Kirjasampo</a>
              <a class="link" ng-if="::person.kulttuurisampo" ng-href="{{ ::person.kulttuurisampo }}">Kulttuurisampo</a>
              <a class="link" ng-if="::person.blf" ng-href="{{ ::person.blf }}">BLF</a>
              <a class="link" ng-if="::person.ulan" ng-href="{{ ::person.ulan }}">ULAN</a>
              <a class="link" ng-if="::person.viaf" ng-href="{{ ::person.viaf }}">VIAF</a>
              <a class="link" ng-if="::person.genicom" ng-href="{{ ::person.genicom }}">Kotisivu (Geni.com)</a>
              <a class="link" ng-if="::person.genitree" ng-href="{{ ::person.genitree }}">Sukupuu (Geni.com)</a>
              <button class="page-btn btn btn-default" ng-click="::vm.openPage(person)">Avaa matrikkelisivu</button>
              <button class="btn btn-default" ng-click="showText = !showText">Näytä matrikkeliteksti</button>
              <div uib-collapse="!showText">
                <p>{{ ::person.entryText }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="clearfix visible-lg-block" ng-if="($index + 1) % 6 == 0"></div>
      <div class="clearfix visible-md-block" ng-if="($index + 1) % 3 == 0"></div>
      <div class="clearfix visible-sm-block" ng-if="($index + 1) % 1 == 0"></div>
      <div class="clearfix visible-xs-block" ng-if="($index + 1) % 1 == 0"></div>
    </div>
  </div>
</div>
<img class="loading-img" src="images/loading-lg.gif" ng-if="vm.isLoadingResults"></img>
